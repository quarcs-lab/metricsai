/* Load Google Fonts for web visitors */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

/* Force page-level TOC list to always be visible */
#TOC > ul {
  display: block !important;
}

/* Left-align Colab badge and hide its auto-generated figcaption */
.quarto-figure-center:has(img[src*="colab-badge"]) {
  text-align: left !important;
}
.quarto-figure-center:has(img[src*="colab-badge"]) .figure {
  text-align: left !important;
  display: inline !important;
}
.quarto-figure-center:has(img[src*="colab-badge"]) figcaption {
  display: none !important;
}

/* Fallback: target all colab badge images directly */
img[src*="colab-badge"] {
  margin: 0 !important;
}

/* Hide "Preface" H1 title on landing page (sidebar entry unaffected) */
#preface > h1 {
  display: none;
}

/* Full-width visual summary images with decorative styling */
img[src*="visual_summary"] {
  width: 100% !important;
  border: 2px solid #008CB7;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  display: block;
  margin: 1rem auto;
}

/* Heading colors - brand palette matching PDF styling */
/* H1: Chapter Title - ElectricCyan */
h1 {
  color: #008CB7 !important;
}

/* H2: Section - SynapsePurple */
h2 {
  color: #7A209F !important;
  border-left: 4px solid #7A209F;
  padding-left: 0.75rem;
}

/* H3: Subsection - DataPink */
h3 {
  color: #C21E72 !important;
}

/* H4: Subsubsection - DeepNavy */
h4 {
  color: #0B1021 !important;
}

/* ── Code blocks ── */
/* Source code: cyan left border with light background */
div.sourceCode {
  background-color: #f7fafc !important;
  border-left: 3px solid #008CB7 !important;
  border-radius: 4px;
}

/* ── Inline code ── */
code {
  background-color: #edf2f7;
  padding: 0.15em 0.4em;
  border-radius: 3px;
  color: #2d3748;
}

/* Reset inline code style inside code blocks */
pre code {
  background-color: transparent;
  padding: 0;
  color: inherit;
}

/* ── Tables ── */
table thead th {
  background-color: #f7fafc !important;
  border-bottom: 2px solid #008CB7 !important;
}

table tbody tr:nth-child(even) {
  background-color: #f7fafc;
}

/* ── Blockquotes / Key Concepts ── */
blockquote {
  border-left: 4px solid #7A209F !important;
  background-color: #faf5ff;
  padding: 1rem 1.25rem;
  border-radius: 4px;
  margin: 1rem 0;
  color: #1a365d !important;
}

/* Key Concept title line */
blockquote strong {
  color: #7A209F;
  font-size: 1.05em;
}

/* ── List markers ── */
ul li::marker {
  color: #008CB7;
}

ol li::marker {
  color: #7A209F;
  font-weight: 600;
}

/* ── Links ── */
a {
  color: #008CB7;
}

a:hover {
  color: #7A209F;
}

/* ── Chapter resource buttons ── */
.chapter-resources {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin: 0.75rem 0;
}

.resource-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.35rem 0.75rem;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 500;
  text-decoration: none !important;
  background-color: #f0f4f8;
  color: #008CB7 !important;
  border: 1px solid #d0dce8;
  transition: all 0.2s;
}

.resource-btn:hover {
  background-color: #008CB7;
  color: white !important;
  border-color: #008CB7;
  text-decoration: none !important;
}

/* ── Output images (plots/charts) ── */
.cell-output img {
  display: block;
  margin: 1rem auto;
}

/* Hidden image (used to force Quarto to copy resource files) */
.hidden {
  display: none !important;
}

/* ── Book cover image in right sidebar (above TOC) ── */
#toc-cover-image {
  text-align: center;
  padding: 0 0.5rem 1rem 0.5rem;
  margin-bottom: 0.5rem;
  border-bottom: 1px solid #e2e8f0;
}

#toc-cover-image img {
  max-width: 100%;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* ── Left Sidebar Navigation Colors ── */

/* Part titles - SynapsePurple */
.sidebar-item-section > .sidebar-item-container > .sidebar-item-text {
  color: #7A209F !important;
  font-weight: 600;
}

/* Chapter titles - ElectricCyan */
.sidebar-section .sidebar-item-text .chapter-title {
  color: #008CB7 !important;
}

/* Preface link - ElectricCyan (consistent with chapters) */
#quarto-sidebar .sidebar-item:not(.sidebar-item-section) > .sidebar-item-container > .sidebar-item-text .menu-text {
  color: #008CB7 !important;
}

/* Active page highlight */
.sidebar-item-text.sidebar-link.active .chapter-title,
.sidebar-item-text.sidebar-link.active .menu-text {
  font-weight: 700;
}

/* Active page: cyan left border + light background */
.sidebar-link.active {
  background-color: rgba(0, 140, 183, 0.1) !important;
  border-left: 3px solid #008CB7;
  padding-left: 0.5rem;
}

/* Sidebar hover transition */
.sidebar-link {
  transition: all 0.2s;
}

.sidebar-link:hover {
  background-color: rgba(0, 140, 183, 0.05) !important;
}

/* Part titles: uppercase with letter-spacing */
.sidebar-item-section > .sidebar-item-container > .sidebar-item-text {
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 0.85rem;
  padding-bottom: 0.25rem;
  border-bottom: 1.5px solid rgba(122, 32, 159, 0.3);
}

/* ── Right Sidebar TOC (page-level headings) ── */

#TOC {
  background: linear-gradient(180deg, #f7fafc 0%, #ffffff 100%);
  border-radius: 8px;
  border: 1px solid #e2e8f0;
  padding: 0.75rem;
}

#TOC h2 {
  color: #7A209F !important;
  font-size: 0.95rem;
  font-weight: 700;
  border-left: none;
  border-bottom: 2px solid #008CB7;
  padding-left: 0;
  padding-bottom: 0.4rem;
  margin-bottom: 0.75rem;
}

#TOC a.nav-link {
  color: #2d3748 !important;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  border-left: 3px solid transparent;
  transition: all 0.2s;
}

#TOC a.nav-link:hover {
  background-color: rgba(0, 140, 183, 0.08);
  color: #008CB7 !important;
}

#TOC a.nav-link.active {
  color: #008CB7 !important;
  font-weight: 600;
  background-color: rgba(0, 140, 183, 0.1);
  border-left: 3px solid #008CB7;
}

/* ── Page Navigation (prev/next chapter) ── */

nav.page-navigation {
  border-top: 2px solid #008CB7;
  padding-top: 1.5rem;
  margin-top: 3rem;
}

nav.page-navigation .nav-page a {
  display: inline-block;
  padding: 0.6rem 1.2rem;
  background-color: #f7fafc;
  border: 1px solid #d0dce8;
  border-radius: 6px;
  transition: all 0.3s;
  text-decoration: none !important;
  color: #008CB7 !important;
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

nav.page-navigation .nav-page a:hover {
  background-color: #008CB7;
  color: white !important;
  border-color: #008CB7;
  box-shadow: 0 4px 12px rgba(0, 140, 183, 0.25);
  transform: translateY(-1px);
}

/* ── Title Block (book metadata) ── */

header#title-block-header {
  background: linear-gradient(135deg, #f7fafc 0%, #eef6ff 100%);
  border-bottom: 3px solid #008CB7;
  padding: 1.5rem;
  margin-bottom: 2rem;
  border-radius: 0 0 8px 8px;
}

.quarto-title-meta-heading {
  color: #7A209F !important;
  font-weight: 600;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.quarto-title-meta-contents {
  color: #2d3748;
}

/* ── Code Output Blocks (purple left border) ── */

.cell-output-stdout pre,
.cell-output-display pre {
  border-left: 3px solid #7A209F !important;
  background-color: #faf5ff !important;
  border-radius: 4px;
  padding: 0.75rem;
}

.cell-output-display .dataframe {
  border-left: 3px solid #7A209F;
}

/* ── Visual Summary Hover Effect ── */

img[src*="visual_summary"] {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

img[src*="visual_summary"]:hover {
  transform: scale(1.01);
  box-shadow: 0 8px 16px rgba(0, 140, 183, 0.2);
}

/* ── Search Box Focus Ring ── */

.aa-Autocomplete .aa-Form {
  border: 2px solid #d0dce8 !important;
  border-radius: 6px !important;
  transition: all 0.2s;
}

.aa-Autocomplete .aa-Form:focus-within {
  border-color: #008CB7 !important;
  box-shadow: 0 0 0 3px rgba(0, 140, 183, 0.15) !important;
}

/* ── Content Link Underlines ── */

main a:not(.nav-link):not(.sidebar-link):not(.resource-btn):not(.quarto-figure a) {
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: all 0.2s;
}

main a:not(.nav-link):not(.sidebar-link):not(.resource-btn):not(.quarto-figure a):hover {
  border-bottom-color: #7A209F;
}

/* ── List Spacing ── */

main li {
  margin-bottom: 0.35rem;
}

/* ════════════════════════════════════════════════════════════════
   DARK MODE OVERRIDES
   Quarto 1.3 toggles body.quarto-dark / body.quarto-light classes.
   Brand colors (cyan, purple, pink) keep good contrast on dark backgrounds.
   Only background/surface colors and light-mode text colors need adjusting.
   ════════════════════════════════════════════════════════════════ */

/* H1: ElectricCyan too muted on dark bg — use brighter cyan (9.2:1 contrast) */
.quarto-dark h1 {
  color: #22d3ee !important;
}

/* H2: SynapsePurple too dark on dark bg — brighter purple (4.9:1 contrast) */
.quarto-dark h2 {
  color: #c084fc !important;
  border-left-color: #c084fc;
}

/* H3: DataPink fails contrast (2.3:1) — brighter pink (5.2:1 contrast) */
.quarto-dark h3 {
  color: #f472b6 !important;
}

/* H4: DeepNavy is invisible on dark — switch to near-white */
.quarto-dark h4 {
  color: #f7fafc !important;
}

.quarto-dark h5,
.quarto-dark h6 {
  color: #e2e8f0 !important;
}

/* Code blocks: solid dark surface with cyan border */
.quarto-dark div.sourceCode {
  background-color: #1a1f2e !important;
}

.quarto-dark div.sourceCode pre {
  color: #e2e8f0;
}

/* Inline code */
.quarto-dark code {
  background-color: rgba(255, 255, 255, 0.1);
  color: #e2e8f0;
}

.quarto-dark pre code {
  background-color: transparent;
  color: inherit;
}

/* Tables */
.quarto-dark table {
  color: #e2e8f0;
}

.quarto-dark table thead th {
  background-color: rgba(0, 140, 183, 0.15) !important;
  color: #e2e8f0 !important;
}

.quarto-dark table tbody tr:nth-child(even) {
  background-color: rgba(255, 255, 255, 0.03);
}

/* Blockquotes / Key Concepts */
.quarto-dark blockquote {
  background-color: rgba(122, 32, 159, 0.15);
  color: #e2e8f0 !important;
}

.quarto-dark blockquote strong {
  color: #c084fc;
}

/* Links */
.quarto-dark a {
  color: #22d3ee;
}

.quarto-dark a:hover {
  color: #c084fc;
}

/* Resource buttons */
.quarto-dark .resource-btn {
  background-color: rgba(255, 255, 255, 0.08);
  color: #22d3ee !important;
  border-color: rgba(255, 255, 255, 0.15);
}

.quarto-dark .resource-btn:hover {
  background-color: #008CB7;
  color: white !important;
  border-color: #008CB7;
}

/* Cover image separator */
.quarto-dark #toc-cover-image {
  border-bottom-color: rgba(255, 255, 255, 0.15);
}

/* Part title bottom border */
.quarto-dark .sidebar-item-section > .sidebar-item-container > .sidebar-item-text {
  border-bottom-color: rgba(122, 32, 159, 0.5);
}

/* Right Sidebar TOC */
.quarto-dark #TOC {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.1);
}

/* TOC h2 needs class+ID specificity to beat #TOC h2 */
.quarto-dark #TOC h2 {
  color: #c084fc !important;
  border-bottom-color: #22d3ee;
}

.quarto-dark #TOC a.nav-link {
  color: #cbd5e0 !important;
}

.quarto-dark #TOC a.nav-link:hover {
  background-color: rgba(0, 140, 183, 0.12);
  color: #22d3ee !important;
}

.quarto-dark #TOC a.nav-link.active {
  color: #22d3ee !important;
  background-color: rgba(0, 140, 183, 0.15);
}

/* Page navigation */
.quarto-dark nav.page-navigation .nav-page a {
  background-color: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.15);
  color: #22d3ee !important;
}

.quarto-dark nav.page-navigation .nav-page a:hover {
  background-color: #008CB7;
  color: white !important;
  border-color: #008CB7;
}

/* Title block */
.quarto-dark header#title-block-header {
  background: rgba(0, 140, 183, 0.08);
  border-bottom-color: #008CB7;
}

.quarto-dark .subtitle {
  color: #e2e8f0 !important;
}

.quarto-dark .quarto-title-meta-contents {
  color: #cbd5e0;
}

/* Code output blocks — solid dark surface with purple tint */
.quarto-dark .cell-output-stdout pre,
.quarto-dark .cell-output-display pre {
  background-color: #1e1a2e !important;
}

/* Search box */
.quarto-dark .aa-Autocomplete .aa-Form {
  border-color: rgba(255, 255, 255, 0.15) !important;
}

/* Sidebar chapter/preface links - brighter cyan for dark */
.quarto-dark .sidebar-section .sidebar-item-text .chapter-title {
  color: #22d3ee !important;
}

.quarto-dark #quarto-sidebar .sidebar-item:not(.sidebar-item-section) > .sidebar-item-container > .sidebar-item-text .menu-text {
  color: #22d3ee !important;
}

/* Sidebar part titles - brighter purple for dark */
.quarto-dark .sidebar-item-section > .sidebar-item-container > .sidebar-item-text {
  color: #c084fc !important;
}

/* Visual summary image - slightly brighter border */
.quarto-dark img[src*="visual_summary"] {
  border-color: #22d3ee;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}
